<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
  <title>Device Connect Javascript Test</title>
  <link rel="stylesheet" href="qunit/qunit-2.9.2.css">
</head>
<body onload="onInit();">
  <script src="qunit/qunit-2.9.2.js"></script>
  <script src="qunit/qunit-reporter-junit.js"></script>
  <script src="dconnectsdk-2.3.0.js"></script>
  <script src="dconnect-test-config.js"></script>
  <script src="dconnect-test-util.js"></script>
<H1>IP設定</H1>
<form name="form1" id="form1" action="">
<table border="0">
  <tr>
    <td align="right"><b> IP:</b></td>
    <td>
      <input type="text" name="ip" value="localhost" size="30" onkeydown="return onInputTextEnter(event);">
    </td>
    <td>
      <input data-role="button" type="button" name="button" id="button" value="更新" onclick="searchDevice();"/>
    </td>
  </tr>
  <tr>
    <td align="right"><b> サービス:</b></td>
    <td>
      <div id="selectServiceId"></div>
    </td>
    <td>
    </td>
  </tr>
</table>
</form>
<H1>デバイスプラグインテスト</H1>
<table border="1" width="100%">
  <tr>
    <td width="80%"><b>chromecastデバイスプラグイン</b></td>
    <td width="20%"><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/chromecast_test.html');">テスト</button></td>
  </tr>
  <tr>
    <td><b>Hostデバイスプラグイン</b></td>
    <td><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/host_test.html');">テスト</button></td>
  </tr>
  <tr>
    <td><b>Hueデバイスプラグイン</b></td>
    <td><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/hue_test.html');">テスト</button></td>
  </tr>
  <tr>
    <td><b>IRKitデバイスプラグイン</b></td>
    <td><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/irkit_test.html');">テスト</button></td>
  </tr>
    <tr>
        <td><b>IRKit仮想デバイスプラグイン(ライト）</b></td>
        <td><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/irkit_virtual_light_test.html');">テスト</button></td>
    </tr>
    <tr>
        <td><b>IRKit仮想デバイスプラグイン(テレビ）</b></td>
        <td><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/irkit_virtual_tv_test.html');">テスト</button></td>
    </tr>

  <tr>
    <td><b>Android Wearデバイスプラグイン</b></td>
    <td><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/wear_test.html');">テスト</button></td>
  </tr>
  <tr>
    <td><b>Health(BLE) デバイスプラグイン (Mio Alpha)</b></td>
    <td><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/mio_alpha_health_test.html');">テスト</button></td>
  </tr>
    <tr>
        <td><b>Thetaデバイスプラグイン(静止画）</b></td>
        <td><button style="padding:10px;" type="button" name="テスト"
                    onclick="onTestClick('tests/theta_takepicture_test.html');">テスト
        </button></td>
    </tr>
    <tr>
        <td><b>Thetaデバイスプラグイン(動画）</b></td>
        <td><button style="padding:10px;" type="button" name="テスト"
                    onclick="onTestClick('tests/theta_record_test.html');">テスト
        </button></td>
    </tr>
    <tr>
        <td><b>Thetaデバイスプラグイン(ROI画像表示）</b></td>
        <td><button style="padding:10px;" type="button" name="テスト"
                    onclick="onTestClick('tests/theta_omnidirectional_image_test.html');">テスト
        </button></td>
    </tr>
  <tr>
    <td><b>UVCデバイスプラグイン</b></td>
    <td><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/uvc_test.html');">テスト</button></td>
  </tr>
  <tr>
    <td><b>Linkingデバイスプラグイン</b></td>
    <td><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/linking_test.html');">テスト</button></td>
  </tr>
  <tr>
    <td><b>FaBoデバイスプラグイン</b></td>
    <td><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/fabo_test.html');">テスト</button></td>
  </tr>
    <tr>
        <td><b>HOGPデバイスプラグイン</b></td>
        <td><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/hogp_test.html');">テスト</button></td>
    </tr>
</table>
<H1>Javascript SDK テスト</H1>
<table border="1" width="100%">
  <tr>
    <td><b>Javascript SDK</b></td>
    <td><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/js_sdk_test.html');">テスト</button></td>
  </tr>
</table>
<H1>API互換性テスト</H1>
<table border="1" width="100%">
  <tr>
    <td><b>新仕様リクエスト</b></td>
    <td><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/compat/new-request.html');">テスト</button></td>
  </tr>
  <tr>
    <td><b>旧仕様リクエスト</b></td>
    <td><button style="padding:10px;" type="button" name="テスト" onclick="onTestClick('tests/compat/old-request.html');">テスト</button></td>
  </tr>
</table>
</body>
<script type="text/javascript">

function onInputTextEnter(evt) {
  console.log("4");

  evt = (evt) ? evt : event;
  let charCode=(evt.charCode) ? evt.charCode : ((evt.which) ? evt.which : evt.keyCode);
  if ((Number(charCode) == 13 || Number(charCode) == 3)) {
    searchDevice();
    return false;
  } else {
    return true;
  }
}

function onInit() {
  init();
    let data = getCookies();
    if (data['ip']) {
        document.forms.form1.ip.value = data['ip'];
    }
    searchDevice();
}

function onTestClick(uri) {
    let ip = document.forms.form1.ip.value;
    let serviceId = document.forms.form1.type.value;
    if (!serviceId) {
       alert('サービスIDを選択してください。');
       return;
    }
    // if (!mAccessToken) {
    //    alert('LocalOAuthをONにし、アクセストークンを取得してください。');
    //    return;
    // }

    document.cookie = 'ip=' + ip;
    document.cookie = 'serviceId=' + serviceId;
    location.href = uri + '?ip=' + ip + "&serviceId=" + serviceId ;
}

</script>
</html>
